'use strict';

oiaApplication.config(
	function($stateProvider, $urlRouterProvider, $httpProvider){

		$urlRouterProvider.otherwise("login");

    $stateProvider
			.state('login',{
				url:"/login",
				views:{
					'login@':{
						templateUrl:"login.html",
						controller:"LoginController"
					}
				}
			})
			.state('register',{
				url:"/register",
				views:{
					'register@':{
						templateUrl:"register.html",
						controller:"RegisterController"
					}
				}
			})
			.state('site',{
				abstract: true,
				views: {
					'topbar@':{
						templateUrl:"topbar.html"
					},
					'main-container@':{
						templateUrl:"main-container.html"
					}
				}
			})

			//----------- Begin main search-form
			.state('site.main-search',{
				url:"/main-search",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"main-search.html",
						controller:"MainController"
					}
				}
			})
			.state('site.institution',{
				url:"/institution",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"institutions/institution-main.html"
					}
				}
			})
			.state('site.institution.institution-management',{
				url:"/management",
				views:{
					'institution-general-information':{
						templateUrl:"institutions/institution-add-edit.html",
						controller:"InstitutionAddEditController"
					},
					'institution-focus':{
						templateUrl:"institutions/institution-focus.html",
						controller:"InstitutionFocusController"
					},
					'institution-ranking':{
						templateUrl:"institutions/institution-ranking.html"
					},
					'institution-relationship':{
						templateUrl:"institutions/institution-relationship.html",
						controller:"InstitutionRelationshipController"
					},
					'institution-opportunity':{
						templateUrl:"institutions/institution-opportunity.html",
						controller:"InstitutionOpportunityController"
					},
					'institution-activity':{
						templateUrl:"institutions/institution-activity.html",
						controller: "InstitutionActivityController"
					},
					'institution-exchange':{
						templateUrl:"institutions/institution-exchange.html",
						controller:"InstitutionExchangeController"
					},
					'institution-contact-person':{
						templateUrl:"institutions/institution-contact-person.html",
						controller: "InstitutionMainContactPersonController"
					}
				},
				params:{
					institutionId:null,
					action:null
				}
			})
			.state('site.institution-relationship-add-edit',{
				url:"/institution-relationship-add-edit",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"institutions/institution-relationship-add-edit.html",
						controller: "InstitutionRelationshipAddEditController"
					}
				},
				params:{
					institutionRelationshipId: null,
					action : null
				}
			})
			.state('site.institution-opportunity-add-edit',{
				url:"/institution-opportunity-add-edit",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"institutions/institution-opportunity-add-edit.html",
						controller: "InstitutionOpportunityAddEditController"
					}
				},
				params:{
					institutionOpportunityId: null,
					action: null
				}
			})
			.state('site.institution-activity-add-edit',{
				url:"/institution-activity-add-edit",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"institutions/institution-activity-add-edit.html",
						controller: "InstitutionActivityAddEditController"
					}
				},
				params: {
					institutionActivityId: null,
					action: null
				}
			})
			
			/*
			//----------- Begin NetworkMOU
			.state('site.relation-network-mou',{
				url:"/relation-network-mou",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"relations/relation-network-mou.html",
						controller:"RelationNetworkMOUController"
					}
				}
			})
			.state('site.relation-add-edit-network-mou-main',{
				url:"/relation-add-edit-network-mou",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"relations/relation-add-edit-network-mou-main.html"
					}
				},
				params:{
					networkMouId:null,
					action:null
				}
			})
			.state('site.relation-add-edit-network-mou-main.information',{
				url:"/information",
				views:{
					'informaion':{
						templateUrl:"relations/relation-add-edit-network-mou-information.html",
						controller:"RelationNetworkMOUInformationController"
					}
				}
			})
			.state('site.relation-add-edit-network-mou-main.institution',{
				url:"/institution",
				views:{
					'institution':{
						templateUrl:"relations/relation-add-edit-network-mou-institution.html",
						controller:"RelationNetworkMOUInstitutionController"
					}
				}
			})
			.state('site.relation-add-edit-network-mou-main.faculty',{
				url:"/faculty",
				views:{
					'faculty':{
						templateUrl:"relations/relation-add-edit-network-mou-faculty.html",
						controller:"RelationNetworkMOUFacultyController"
					}
				}
			})
			//----------- End NetworkMou
			//----------- Begin Activity Exchange
			.state('site.activity-exchange-main',{
				url:"/activity-exchange",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"activities/exchange/main.html",
						controller:"ActivityExchangeController"
					}
				}
			})
			.state('site.activity-exchange-add-edit',{
				url:"/activity-exchange-add-edit-main",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"activities/exchange/add-edit-main.html"
					}
				},
				params:{
					activityExchangeId:null,
					action:null
				}
			})
			.state('site.activity-exchange-add-edit.information',{
				url:"/information",
				views:{
					'information':{
						templateUrl:"activities/exchange/add-edit-information.html",
						controller:"ActivityExchangeInformationController"
					}
				}
			})
			.state('site.activity-exchange-add-edit.person',{
				url:"/person",
				views:{
					'person':{
						templateUrl:"activities/exchange/add-edit-person.html",
						controller:"ActivityExchangePersonController"
					}
				}
			})
			//----------- End Activity Exchange
			//----------- Begin Activity instruction-research
			.state('site.instruction-research-main',{
				url:"/instruction-research",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"activities/instruction-research/main.html",
						controller:"ActivityInstructionResearchController"
					}
				}
			})
			.state('site.instruction-research-add-edit',{
				url:"/instruction-research-add-edit",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"activities/instruction-research/add-edit-instructor.html",
						controller:"ActivityInstructionResearchAddEditController"
					}
				},
				params:{
					activityInstructionResearchId:null,
					action:null
				}
			})
			//----------- End Activity instruction-research
			*/
			// ---------- Begin Master
			.state('site.master-region',{
				url:"/master-region",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-region.html",
						controller:"MasterRegionController"
					}
				}
			})
			.state('site.master-country',{
				url:"/master-country",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-country.html",
						controller:"MasterCountryController"
					}
				}
			})
			.state('site.master-institution',{
				url:"/master-institution",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-institution.html",
						controller:"MasterInstitutionController"
					}
				}
			})
			.state('site.master-faculty',{
				url:"/master-faculty",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-faculty.html",
						controller:"MasterFacultyController"
					}
				}
			})
			.state('site.master-agreement-type',{
				url:"/master-agreement-type",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-agreement-type.html",
						controller:"MasterAgreementTypeController"
					}
				}
			})
			.state('site.master-prefix',{
				url:"/master-prefix",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-prefix.html",
						controller:"MasterPrefixController"
					}
				}
			})
			.state('site.master-person',{
				url:"/master-person",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-person.html",
						controller:"MasterPersonController"
					}
				}
			})
			.state('site.master-add-edit-person',{
				url:"/master-add-edit-person",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-add-edit-person.html",
						controller:"MasterPersonDetailController"
					}
				},
				params:{
					personId:null,
					action:null
				}
			})
			.state('site.master-province',{
				url:"/master-province",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-province.html",
						controller:"MasterProvinceController"
					}
				}
			})
			.state('site.master-amphur',{
				url:"/master-amphur",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-amphur.html",
						controller:"MasterAmphurController"
					}
				}
			})
			.state('site.master-tambol',{
				url:"/master-tambol",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"masters/master-tambol.html",
						controller:"MasterTambolController"
					}
				}
			})
			//----------- Begin User management
			.state('site.user-main',{
				url:"/user-main",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"user/main.html",
						controller:"UserManagementController"
					}
				}
			})
			//----------- End User management

			//----------- Begin Role management
			.state('site.role-main',{
				url:"/role-main",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"role/main.html",
						controller:"RoleManagementController"
					}
				}
			})
			//----------- End User management

			//----------- Begin Report
			.state('site.report-main',{
				url:"/report-main",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/report-main.html"
					}
				}
			})
			.state('site.rpt001',{
				url:"/report-001",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt001.html",
						controller:"Rpt001Controller"
					}
				}
			})
			.state('site.rpt002',{
				url:"/report-002",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt002.html",
						controller:"Rpt002Controller"
					}
				}
			})
			.state('site.rpt003',{
				url:"/report-003",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt003.html",
						controller:"Rpt003Controller"
					}
				}
			})
			.state('site.rpt004',{
				url:"/report-004",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt004.html",
						controller:"Rpt004Controller"
					}
				}
			})
			.state('site.rpt005',{
				url:"/report-005",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt005.html",
						controller:"Rpt005Controller"
					}
				}
			})
			.state('site.rpt006',{
				url:"/report-006",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt006.html",
						controller:"Rpt006Controller"
					}
				}
			})
			.state('site.rpt007',{
				url:"/report-007",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt007.html",
						controller:"Rpt007Controller"
					}
				}
			})
			.state('site.rpt008',{
				url:"/report-008",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt008.html",
						controller:"Rpt008Controller"
					}
				}
			})
			.state('site.rpt009',{
				url:"/report-009",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt009.html",
						controller:"Rpt009Controller"
					}
				}
			})
			.state('site.rpt010',{
				url:"/report-010",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt010.html",
						controller:"Rpt010Controller"
					}
				}
			})
			.state('site.rpt011',{
				url:"/report-011",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt011.html",
						controller:"Rpt011Controller"
					}
				}
			})
			.state('site.rpt012',{
				url:"/report-012",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt012.html",
						controller:"Rpt012Controller"
					}
				}
			})
			.state('site.rpt013',{
				url:"/report-013",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt013.html",
						controller:"Rpt013Controller"
					}
				}
			})
			.state('site.rpt014',{
				url:"/report-014",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt014.html",
						controller:"Rpt014Controller"
					}
				}
			})
			.state('site.rpt015',{
				url:"/report-015",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt015.html",
						controller:"Rpt015Controller"
					}
				}
			})
			.state('site.rpt016',{
				url:"/report-016",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt016.html",
						controller:"Rpt016Controller"
					}
				}
			})
			.state('site.rpt017',{
				url:"/report-017",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt017.html",
						controller:"Rpt017Controller"
					}
				}
			})
			.state('site.rpt018',{
				url:"/report-018",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt018.html",
						controller:"Rpt018Controller"
					}
				}
			})
			.state('site.rpt019',{
				url:"/report-019",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt019.html",
						controller:"Rpt019Controller"
					}
				}
			})
			.state('site.rpt020',{
				url:"/report-020",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt020.html",
						controller:"Rpt020Controller"
					}
				}
			})
			.state('site.rpt021',{
				url:"/report-021",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt021.html",
						controller:"Rpt021Controller"
					}
				}
			})
			.state('site.rpt022',{
				url:"/report-022",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt022.html",
						controller:"Rpt022Controller"
					}
				}
			})
			.state('site.rpt023',{
				url:"/report-023",
				views:{
					'sidebar':{
						templateUrl:"sidebar.html"
					},
					'content':{
						templateUrl:"reports/rpt023.html",
						controller:"Rpt023Controller"
					}
				}
			});
			//----------- End Report

		$httpProvider.defaults.headers.common["X-Requested-With"] = 'XMLHttpRequest';
		$httpProvider.interceptors.push('HttpInterceptor');
		$httpProvider.interceptors.push('AuthenticationInterceptor');
		$httpProvider.defaults.xsrfHeaderName = 'X-CSRF-TOKEN';
		$httpProvider.defaults.xsrfCookieName = 'CSRF-TOKEN';
	}
)
.config(['cfpLoadingBarProvider', function(cfpLoadingBarProvider) {
    cfpLoadingBarProvider.includeSpinner = true;
    // cfpLoadingBarProvider.parentSelector = '#loading-bar-container';
    // cfpLoadingBarProvider.spinnerTemplate = '<div id="loading-bar-spinner"><i class="spinner-icon"></i></div>';
  }])
.config(function(localStorageServiceProvider){
	localStorageServiceProvider.setPrefix('chula')
							   .setStorageType('sessionStorage')
							   .setNotify(true, true);
})
.run(function ($rootScope, $window, $state,cfpLoadingBar) {
	$rootScope.$on('$stateChangeStart', function (event, toState, toStateParams) {
		cfpLoadingBar.start();
		// angular.forEach(toState.views,function(val,id){
		// 	console.log(val);
		// });
        
    });

    $rootScope.$on('$stateChangeSuccess', function (event, toState, toParams, fromState, fromParams) {
        cfpLoadingBar.complete();
    });

    $rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {
		// this is required if you want to prevent the $UrlRouter reverting the URL to the previous valid location
        event.preventDefault();
    });
});
// .run(function($interval, localStorageService, $state){
// 	$interval(function(){
// 		localStorageService.remove('authorization');
// 		localStorageService.remove('userSession');
// 	}, 1000 * 60 * 20); //--- set interval in minute
// });;
